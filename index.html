<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Desmos</title>
	<style type="text/css">
		*{
			margin: 0px 0px;
			padding: 0px 0px;
		}
	</style>
	<script src="https://www.desmos.com/api/v1.6/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
</head>
<body>
	<div id="calculator" style="width: 100vw; height: 100vh;"></div>
	<script>
		let elt = document.getElementById('calculator');
	    	let calculator = Desmos.GraphingCalculator(elt);

 		function draw() {
		    xhr = new XMLHttpRequest();
		    xhr.open("GET", "http://127.0.0.1:5000/");
		    xhr.send();

		    xhr.onload = function() {
		        contours = JSON.parse(xhr.response);
		        let line = ""
		 
		        for(let i=0; i < contours.length; i++){
		             
		            let c = contours[i].length 
		            for(let j=0;j < c - 1; j++){
		               let x1 = contours[i][j][0][0]
		               let y1 =-contours[i][j][0][1]
		               let x2 = contours[i][j+1][0][0]
		               let y2 =-contours[i][j+1][0][1]
		               let m = (y2-y1)/(x2-x1)

		               if (x1!==x2){
		                  if(y1<y2){
		                    line='y'+'-'+y1.toString()+'='+m.toString()+'('+'x'+'-'+x1.toString()+')'+'\\left\\{'+y1.toString()+'<'+'y'+'<'+y2.toString()+'\\right\\}'
		                   }
		                  if (y1>y2){
		                    line='y'+'-'+y1.toString()+'='+m.toString()+'('+'x'+'-'+x1.toString()+')'+'\\left\\{'+y2.toString()+'<'+'y'+'<'+y1.toString()+'\\right\\}'
		                   }
		                }
		               
		               if(x1==x2 && y1<y2){
		                   line='x'+'='+x1.toString()+'\\left\\{'+y1.toString()+'<'+'y'+'<'+y2.toString()+'\\right\\}'
		                }
		               if(x1==x2 && y1>y2){
		                  line='x'+'='+x1.toString()+'\\left\\{'+y2.toString()+'<'+'y'+'<'+y1.toString()+'\\right\\}'
		                }
		                
		                calculator.setExpression({ id: `line${c*j + i + 1}`, latex: line, color: '#000000' , lineStyle: Desmos.Styles.SOLID }) //hex code of your prefered colour in color section
		            }  //SOLID->solid lines, DASHED->dashed lines, DOTTED-> dotted lines ....
		        }
	    	    }
	    	    return 'Its Working!'
	 	}
	</script>
</body>
</html>
